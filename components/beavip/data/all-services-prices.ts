// Prezzi fissi per tutti i servizi

// Instagram (già implementati)
export const instagramPrices = {
  followers: {
    100: 2.0,
    250: 4.0,
    500: 5.0,
    1000: 6.99,
    2500: 13.99,
    5000: 25.0,
    7000: 36.0,
    10000: 55.0,
    15000: 80.0,
    20000: 110.0,
    30000: 165.0,
    40000: 220.0,
    50000: 275.0,
    100000: 550.0,
  },
  likes: {
    100: 0.99,
    250: 2.97,
    500: 5.94,
    1000: 9.99,
    2500: 25.0,
    5000: 50.0,
    7000: 75.0,
    10000: 100.0,
    15000: 150.0,
    20000: 200.0,
    30000: 300.0,
    40000: 400.0,
    50000: 500.0,
    100000: 1000.0,
  },
  views: {
    1000: 1.8,
    5000: 7.25,
    10000: 12.72,
    25000: 27.25,
    50000: 45.4,
    100000: 72.6,
  },
  comments: {
    10: 5.0,
    25: 10.0,
    50: 18.0,
    100: 30.0,
    250: 70.0,
    500: 130.0,
  },
}

// Telegram
export const telegramPrices = {
  members: {
    100: 1.0371,
    500: 5.1855,
    1000: 10.371,
    2500: 25.9275,
    5000: 51.855,
    10000: 103.71,
  },
  membersHQ: {
    100: 2.4198,
    500: 12.099,
    1000: 24.198,
    2500: 60.495,
    5000: 120.99,
  },
  membersCentral: {
    100: 1.9146,
    500: 9.573,
    1000: 19.146,
    2500: 47.865,
    5000: 95.73,
  },
  membersCentralAlt: {
    100: 1.8614,
    500: 9.307,
    1000: 18.614,
    2500: 46.535,
    5000: 93.07,
  },
  membersLifetime: {
    100: 2.4198,
    500: 12.099,
    1000: 24.198,
    2500: 60.495,
    5000: 120.99,
  },
  membersAvatar: {
    100: 4.4229,
    500: 22.1145,
    1000: 44.229,
    2500: 110.5725,
  },
  views: {
    100: 0.0089,
    500: 0.0445,
    1000: 0.089,
    2500: 0.2225,
    5000: 0.445,
    10000: 0.89,
  },
  viewsStatic: {
    100: 0.0178,
    500: 0.089,
    1000: 0.178,
    2500: 0.445,
    5000: 0.89,
  },
  viewsFast: {
    100: 0.0266,
    500: 0.133,
    1000: 0.266,
    2500: 0.665,
    5000: 1.33,
  },
  viewsBest: {
    100: 0.0178,
    500: 0.089,
    1000: 0.178,
    2500: 0.445,
    5000: 0.89,
  },
  viewsFastStar: {
    100: 0.0266,
    500: 0.133,
    1000: 0.266,
    2500: 0.665,
    5000: 1.33,
  },
  viewsStable: {
    100: 0.0355,
    500: 0.1775,
    1000: 0.355,
    2500: 0.8875,
    5000: 1.775,
  },
  viewsFast5Posts: {
    100: 0.0975,
    500: 0.4875,
    1000: 0.975,
    2500: 2.4375,
    5000: 4.875,
  },
  viewsFast10Posts: {
    100: 0.1862,
    500: 0.931,
    1000: 1.862,
    2500: 4.655,
    5000: 9.31,
  },
}

// YouTube
export const youtubePrices = {
  liveStream: {
    15: 0.523,
    30: 1.0371,
    60: 2.0209,
    90: 2.8186,
    120: 3.7759,
    180: 5.7436,
    360: 22.3361,
    720: 37.8915,
  },
  views: {
    1000: 3.5,
    3000: 3.35,
    5000: 3.2,
    10000: 2.65,
    25000: 6.0,
    50000: 11.0,
    100000: 20.0,
  },
  viewsHQ: {
    1000: 3.5252,
    3000: 3.348,
    5000: 3.171,
    10000: 2.6394,
    25000: 6.0,
    50000: 11.0,
    100000: 20.0,
  },
  viewsHQ3k: {
    3000: 3.348,
    5000: 3.171,
    10000: 2.6394,
    25000: 6.0,
    50000: 11.0,
    100000: 20.0,
  },
  viewsHQ5kPremium: {
    5000: 3.171,
    10000: 2.6394,
    25000: 6.0,
    50000: 11.0,
    100000: 20.0,
  },
  viewsHQ10k: {
    10000: 2.6394,
    25000: 6.0,
    50000: 11.0,
    100000: 20.0,
  },
  likes: {
    100: 3.171,
    250: 7.5,
    500: 14.0,
    1000: 25.0,
    2500: 60.0,
  },
  comments: {
    10: 38.103,
    25: 95.2575,
    50: 190.515,
    100: 380.0,
  },
  subscribers: {
    100: 9.8314,
    250: 24.5785,
    500: 49.157,
    1000: 98.0,
    2000: 195.0,
  },
}

// TikTok
export const tiktokPrices = {
  viewsCheap: {
    100: 0.0089,
    500: 0.0445,
    1000: 0.089,
    5000: 0.445,
    10000: 0.89,
    50000: 4.45,
    100000: 8.9,
  },
  likes: {
    100: 0.3457,
    500: 1.7285,
    1000: 3.457,
    2500: 8.6425,
    5000: 17.285,
  },
  shares: {
    100: 0.2837,
    500: 1.4185,
    1000: 2.837,
    2500: 7.0925,
    5000: 14.185,
  },
  likesFast: {
    100: 1.2498,
    500: 6.249,
    1000: 12.498,
    2500: 31.245,
    5000: 62.49,
  },
  followers: {
    100: 4.2545,
    500: 21.2725,
    1000: 42.545,
    2500: 106.3625,
    5000: 212.725,
  },
}

// Facebook
export const facebookPrices = {
  postLikes: {
    100: 1.9397,
    500: 9.6985,
    1000: 19.397,
    2500: 48.4925,
    5000: 96.985,
  },
  postReactions: {
    100: 2.5154,
    500: 12.577,
    1000: 25.154,
    2500: 62.885,
    5000: 125.77,
  },
  emoticonsLikes: {
    100: 3.6668,
    500: 18.334,
    1000: 36.668,
    2500: 91.67,
    5000: 183.34,
  },
}

// Twitch
export const twitchPrices = {
  followers: {
    100: 1.55,
    500: 7.75,
    1000: 15.5,
    2500: 38.75,
    5000: 77.5,
  },
  livePlays: {
    10: 7.6348,
    20: 14.1712,
    30: 23.0282,
    40: 28.3424,
    50: 30.9995,
    60: 35.428,
    120: 88.57,
  },
  // Non esistono likes per Twitch
}

// Website Visits
export const websiteVisitsPrices = {
  fromFacebook: {
    1000: 2.1273,
    5000: 10.6365,
    10000: 21.273,
    25000: 53.1825,
    50000: 106.365,
  },
  fromInstagram: {
    1000: 0.6116,
    5000: 3.058,
    10000: 6.116,
    2500: 15.29,
    50000: 30.58,
  },
  fromQuora: {
    1000: 0.6116,
    5000: 3.058,
    10000: 6.116,
    25000: 15.29,
    50000: 30.58,
  },
  fromReddit: {
    1000: 0.6116,
    5000: 3.058,
    10000: 6.116,
    25000: 15.29,
    50000: 30.58,
  },
  fromTwitter: {
    1000: 0.6116,
    5000: 3.058,
    10000: 6.116,
    25000: 15.29,
    50000: 30.58,
  },
}

// WhatsApp
export const whatsappPrices = {
  // Prezzi per l'acquisto di numeri WhatsApp (incrementati rispetto a Telegram)
  purchase: {
    1: 50,
    2: 100,
    5: 240,
    10: 450,
    20: 850,
  },
  // Prezzi per il noleggio di numeri WhatsApp (incrementati rispetto a Telegram)
  rental: {
    1: {
      1: 7, // 1 numero per 1 mese
      3: 20, // 1 numero per 3 mesi
      6: 36, // 1 numero per 6 mesi
      12: 65, // 1 numero per 12 mesi
    },
    2: {
      1: 14, // 2 numeri per 1 mese
      3: 40, // 2 numeri per 3 mesi
      6: 72, // 2 numeri per 6 mesi
      12: 130, // 2 numeri per 12 mesi
    },
    5: {
      1: 32, // 5 numeri per 1 mese
      3: 90, // 5 numeri per 3 mesi
      6: 170, // 5 numeri per 6 mesi
      12: 300, // 5 numeri per 12 mesi
    },
    10: {
      1: 60, // 10 numeri per 1 mese
      3: 170, // 10 numeri per 3 mesi
      6: 320, // 10 numeri per 6 mesi
      12: 550, // 10 numeri per 12 mesi
    },
  },
}

// Negozi Telegram
export const telegramShopPrices = {
  // Prezzi base per il negozio (basati sui prezzi mostrati nelle immagini)
  basic: {
    1: 9.99, // 1 mese (maggiorato rispetto ai 7.99€ originali)
    3: 27.99, // 3 mesi (maggiorato rispetto ai 21.98€ originali)
    6: 49.99, // 6 mesi (maggiorato rispetto ai 41.98€ originali)
    12: 189.99, // 12 mesi + funzioni Pro (maggiorato rispetto ai 160.00€ originali)
    24: 369.99, // 24 mesi + funzioni Pro (maggiorato rispetto ai 320.00€ originali)
    36: 549.99, // 3 anni + funzioni Pro (maggiorato rispetto ai 480.00€ originali)
    60: 899.99, // 5 anni + funzioni Pro (maggiorato rispetto ai 800.00€ originali)
  },
  // Prezzi per il servizio di creazione assistita (maggiorati rispetto ai prezzi base)
  assisted: {
    1: 29.99, // 1 mese con assistenza
    3: 69.99, // 3 mesi con assistenza
    6: 119.99, // 6 mesi con assistenza
    12: 249.99, // 12 mesi + funzioni Pro con assistenza
    24: 449.99, // 24 mesi + funzioni Pro con assistenza
    36: 649.99, // 3 anni + funzioni Pro con assistenza
    60: 999.99, // 5 anni + funzioni Pro con assistenza
  },
  // Prezzi aggiuntivi per servizi extra
  extras: {
    setupFee: 49.99, // Costo di setup iniziale
    productsSetup: {
      10: 29.99, // Configurazione di 10 prodotti
      25: 59.99, // Configurazione di 25 prodotti
      50: 99.99, // Configurazione di 50 prodotti
      100: 179.99, // Configurazione di 100 prodotti
    },
    logoDesign: 39.99, // Creazione logo personalizzato
    welcomeMessage: 19.99, // Messaggio di benvenuto personalizzato
    categoriesSetup: 29.99, // Configurazione delle categorie
  },
}

// Aggiungiamo i prezzi delle licenze software e dell'installazione remota

export const softwareLicenses = {
  windows: {
    win11ProRetail1PC: {
      name: "[Retail] Windows 11 Pro",
      description: "Attiva 1 PC online",
      price: 15.0,
      type: "retail",
    },
    win11ProRetail5PC: {
      name: "[Retail] Windows 11 Pro",
      description: "Attiva 5 PC online",
      price: 75.0,
      type: "retail",
    },
    win11HomeOEM1PC: {
      name: "[OEM] Windows 11 Home",
      description: "Attiva 1 PC online",
      price: 10.0,
      type: "oem",
    },
  },
  office: {
    office2019ProPhone3PC: {
      name: "[Phone] Office 2019 Pro Plus",
      description: "Attiva 3 PC offline",
      price: 30.0,
      type: "phone",
    },
    office2021ProPhone3PC: {
      name: "[Phone] Office 2021 Pro Plus",
      description: "Attiva 3 PC offline",
      price: 25.0,
      type: "phone",
    },
  },
  installation: {
    remote: {
      name: "Installazione da remoto",
      description: "Un nostro tecnico si collegherà al tuo PC tramite AnyDesk per installare e attivare il software",
      price: 15.0,
    },
  },
}

// Funzione per calcolare il prezzo delle licenze
export const calculateLicensePrice = (licenseId: string, withRemoteInstallation = false): number => {
  let basePrice = 0

  // Determina il prezzo base della licenza
  if (licenseId.startsWith("win")) {
    basePrice = softwareLicenses.windows[licenseId].price
  } else if (licenseId.startsWith("office")) {
    basePrice = softwareLicenses.office[licenseId].price
  }

  // Aggiungi il prezzo dell'installazione remota se richiesta
  if (withRemoteInstallation) {
    basePrice += softwareLicenses.installation.remote.price
  }

  return basePrice
}

// Funzione per ottenere il prezzo più vicino in base alla quantità
export function getNearestPrice(quantity: number, type: string, platform: string): number {
  let prices: Record<number, number> = {}

  // Seleziona il giusto oggetto di prezzi in base al tipo e alla piattaforma
  if (platform === "instagram") {
    if (type === "followers") prices = instagramPrices.followers
    else if (type === "likes") prices = instagramPrices.likes
    else if (type === "views") prices = instagramPrices.views
    else if (type === "comments") prices = instagramPrices.comments
  } else if (platform === "telegram") {
    if (type === "members") prices = telegramPrices.members
    else if (type === "membersHQ") prices = telegramPrices.membersHQ
    else if (type === "membersCentral") prices = telegramPrices.membersCentral
    else if (type === "membersCentralAlt") prices = telegramPrices.membersCentralAlt
    else if (type === "membersLifetime") prices = telegramPrices.membersLifetime
    else if (type === "membersAvatar") prices = telegramPrices.membersAvatar
    else if (type === "views") prices = telegramPrices.views
    else if (type === "viewsStatic") prices = telegramPrices.viewsStatic
    else if (type === "viewsFast") prices = telegramPrices.viewsFast
    else if (type === "viewsBest") prices = telegramPrices.viewsBest
    else if (type === "viewsFastStar") prices = telegramPrices.viewsFastStar
    else if (type === "viewsStable") prices = telegramPrices.viewsStable
    else if (type === "viewsFast5Posts") prices = telegramPrices.viewsFast5Posts
    else if (type === "viewsFast10Posts") prices = telegramPrices.viewsFast10Posts
    else if (type === "shop") {
      // Per i negozi Telegram, restituisci direttamente il prezzo in base alla durata
      const duration = Number(quantity)
      return telegramShopPrices.basic[duration] || telegramShopPrices.basic[1]
    } else if (type === "shopAssisted") {
      // Per i negozi Telegram con assistenza, restituisci direttamente il prezzo in base alla durata
      const duration = Number(quantity)
      return telegramShopPrices.assisted[duration] || telegramShopPrices.assisted[1]
    }
  } else if (platform === "youtube") {
    if (type === "liveStream") prices = youtubePrices.liveStream
    else if (type === "views") prices = youtubePrices.views
    else if (type === "viewsHQ") prices = youtubePrices.viewsHQ
    else if (type === "viewsHQ3k") prices = youtubePrices.viewsHQ3k
    else if (type === "viewsHQ5kPremium") prices = youtubePrices.viewsHQ5kPremium
    else if (type === "viewsHQ10k") prices = youtubePrices.viewsHQ10k
    else if (type === "likes") prices = youtubePrices.likes
    else if (type === "comments") prices = youtubePrices.comments
    else if (type === "subscribers") prices = youtubePrices.subscribers
  } else if (platform === "tiktok") {
    if (type === "viewsCheap") prices = tiktokPrices.viewsCheap
    else if (type === "likes") prices = tiktokPrices.likes
    else if (type === "shares") prices = tiktokPrices.shares
    else if (type === "likesFast") prices = tiktokPrices.likesFast
    else if (type === "followers") prices = tiktokPrices.followers
  } else if (platform === "facebook") {
    if (type === "postLikes") prices = facebookPrices.postLikes
    else if (type === "postReactions") prices = facebookPrices.postReactions
    else if (type === "emoticonsLikes") prices = facebookPrices.emoticonsLikes
  } else if (platform === "twitch") {
    if (type === "followers") prices = twitchPrices.followers
    else if (type === "livePlays") prices = twitchPrices.livePlays
    // Non ci sono likes per Twitch
  } else if (platform === "website") {
    if (type === "fromFacebook") prices = websiteVisitsPrices.fromFacebook
    else if (type === "fromInstagram") prices = websiteVisitsPrices.fromInstagram
    else if (type === "fromQuora") prices = websiteVisitsPrices.fromQuora
    else if (type === "fromReddit") prices = websiteVisitsPrices.fromReddit
    else if (type === "fromTwitter") prices = websiteVisitsPrices.fromTwitter
  } else if (platform === "whatsapp") {
    if (type === "purchase") {
      return whatsappPrices.purchase[quantity] || whatsappPrices.purchase[1] * quantity
    } else if (type === "rental") {
      // Per il noleggio, dobbiamo considerare sia la quantità che la durata
      const duration = quantity.toString().split("_")[1] || 1
      const qty = Number.parseInt(quantity.toString().split("_")[0]) || 1

      // Trova la quantità più vicina disponibile
      const availableQty = Object.keys(whatsappPrices.rental)
        .map(Number)
        .sort((a, b) => Math.abs(a - qty) - Math.abs(b - qty))[0]

      // Trova la durata più vicina disponibile
      const availableDuration = Object.keys(whatsappPrices.rental[availableQty])
        .map(Number)
        .sort((a, b) => Math.abs(a - duration) - Math.abs(b - duration))[0]

      return whatsappPrices.rental[availableQty][availableDuration]
    }
  }

  // Se la quantità è esattamente una delle quantità predefinite, restituisci il prezzo corrispondente
  if (prices[quantity]) {
    return prices[quantity]
  }

  // Trova la quantità predefinita più vicina
  const quantities = Object.keys(prices)
    .map(Number)
    .sort((a, b) => a - b)

  if (quantities.length === 0) {
    return 0 // Nessun prezzo trovato
  }

  let nearestQuantity = quantities[0]
  for (const q of quantities) {
    if (Math.abs(q - quantity) < Math.abs(nearestQuantity - quantity)) {
      nearestQuantity = q
    }
  }

  // Calcola il prezzo proporzionale
  const pricePerUnit = prices[nearestQuantity] / nearestQuantity
  return Number.parseFloat((quantity * pricePerUnit).toFixed(2))
}

// Funzione per ottenere il prezzo di una licenza
export function getLicensePrice(licenseId: string): number {
  // Controlla se è una licenza Windows
  if (licenseId in softwareLicenses.windows) {
    return softwareLicenses.windows[licenseId].price
  }

  // Controlla se è una licenza Office
  if (licenseId in softwareLicenses.office) {
    return softwareLicenses.office[licenseId].price
  }

  return 0
}

// Funzione per ottenere i dettagli di una licenza
export function getLicenseDetails(licenseId: string): any {
  // Controlla se è una licenza Windows
  if (licenseId in softwareLicenses.windows) {
    return softwareLicenses.windows[licenseId]
  }

  // Controlla se è una licenza Office
  if (licenseId in softwareLicenses.office) {
    return softwareLicenses.office[licenseId]
  }

  return null
}

// Funzione per ottenere il prezzo di noleggio WhatsApp
export function getWhatsAppRentalPrice(quantity: number, duration: number): number {
  // Trova la quantità più vicina disponibile
  const availableQty = Object.keys(whatsappPrices.rental)
    .map(Number)
    .sort((a, b) => Math.abs(a - quantity) - Math.abs(b - quantity))[0]

  // Trova la durata più vicina disponibile
  const availableDuration = Object.keys(whatsappPrices.rental[availableQty])
    .map(Number)
    .sort((a, b) => Math.abs(a - duration) - Math.abs(b - duration))[0]

  return whatsappPrices.rental[availableQty][availableDuration]
}

// Funzione per calcolare il prezzo totale del negozio Telegram con extra
export function calculateTelegramShopPrice(
  duration: number,
  isAssisted: boolean,
  extras: {
    setupFee?: boolean
    productsCount?: number
    logoDesign?: boolean
    welcomeMessage?: boolean
    categoriesSetup?: boolean
  },
): number {
  // Prezzo base in base alla durata e al tipo di servizio (assistito o no)
  const basePrice = isAssisted
    ? telegramShopPrices.assisted[duration] || telegramShopPrices.assisted[1]
    : telegramShopPrices.basic[duration] || telegramShopPrices.basic[1]

  let totalExtras = 0

  // Aggiungi il costo di setup se richiesto
  if (extras.setupFee) {
    totalExtras += telegramShopPrices.extras.setupFee
  }

  // Aggiungi il costo per la configurazione dei prodotti se richiesto
  if (extras.productsCount) {
    if (extras.productsCount <= 10) totalExtras += telegramShopPrices.extras.productsSetup[10]
    else if (extras.productsCount <= 25) totalExtras += telegramShopPrices.extras.productsSetup[25]
    else if (extras.productsCount <= 50) totalExtras += telegramShopPrices.extras.productsSetup[50]
    else totalExtras += telegramShopPrices.extras.productsSetup[100]
  }

  // Aggiungi il costo per la creazione del logo se richiesto
  if (extras.logoDesign) {
    totalExtras += telegramShopPrices.extras.logoDesign
  }

  // Aggiungi il costo per il messaggio di benvenuto se richiesto
  if (extras.welcomeMessage) {
    totalExtras += telegramShopPrices.extras.welcomeMessage
  }

  // Aggiungi il costo per la configurazione delle categorie se richiesto
  if (extras.categoriesSetup) {
    totalExtras += telegramShopPrices.extras.categoriesSetup
  }

  return basePrice + totalExtras
}
